# ADR-0002: Единый Валидационный Центр

## Решение
Создаём пакет Validation Center в `src/contracts/`: загрузчик схем (`loader.py`), таксономию ошибок (`errors.py`), профили (`profiles.py`), реестр правил (`rulebook.py`) и фасад (`validator.py`). Все стадии оркестратора и скрипты вызывают `validator.validate` или `validator.assert_valid`, Envelope проверяется централизованно, `ExportBundle` дополнительно проходит `check_refs`. Профили `dev`, `ci`, `prod` регулируют строгость, в `ci` WARN трактуются как ошибки, в `prod` второстепенные проверки понижаются до WARN при сохранении жёстких кросс-ссылок.

## Мотивация
Ранее проверки артефактов были разбросаны по стадиям и скриптам, расходились со схемами PuzzleContracts и усложняли переход к многозадачности. ЕВЦ предотвращает расползание правил, позволяет эволюционировать контракты и профили без правок стадий, а также объединяет офлайн- и онлайновые проверки.

## Последствия
Проверки выполняются только на границах стадий, сами стадии остаются чистыми и детерминированными. Оркестратор, скрипты и экспортер используют единый API, расширение rulebook становится управляемым. Любые изменения правил требуют обновления `rulebook` и согласования профилей.

## Ссылки
- [docs/CODEX_GUIDE.md](../CODEX_GUIDE.md)
